// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE
(function(n){"object"==typeof exports&&"object"==typeof module?n(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){n.defineMode("javascript",function(ka,r){function p(a,c,e){B=a;G=e;return c}function u(a,c){var e=a.next();if('"'==e||"'"==e)return c.tokenize=la(e),c.tokenize(a,c);if("."==e&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return p("number","number");if("."==e&&a.match(".."))return p("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(e))return p(e);
if("="==e&&a.eat(">"))return p("=>","operator");if("0"==e&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),p("number","number");if(/\d/.test(e))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),p("number","number");if("/"==e){if(a.eat("*"))return c.tokenize=H,H(a,c);if(a.eat("/"))return a.skipToEnd(),p("comment","comment");if("operator"==c.lastType||"keyword c"==c.lastType||"sof"==c.lastType||/^[\[{}\(,;:]$/.test(c.lastType)){a:for(var e=!1,d,b=!1;null!=(d=a.next());){if(!e){if("/"==d&&!b)break a;"["==
d?b=!0:b&&"]"==d&&(b=!1)}e=!e&&"\\"==d}a.eatWhile(/[gimy]/);return p("regexp","string-2")}a.eatWhile(N);return p("operator","operator",a.current())}if("`"==e)return c.tokenize=O,O(a,c);if("#"==e)return a.skipToEnd(),p("error","error");if(N.test(e))return a.eatWhile(N),p("operator","operator",a.current());if(P.test(e))return a.eatWhile(P),e=a.current(),(d=Y.propertyIsEnumerable(e)&&Y[e])&&"."!=c.lastType?p(d.type,d.style,e):p("variable","variable",e)}function la(a){return function(c,e){var d=!1,b;
if(I&&"@"==c.peek()&&c.match(ma))return e.tokenize=u,p("jsonld-keyword","meta");for(;null!=(b=c.next())&&(b!=a||d);)d=!d&&"\\"==b;d||(e.tokenize=u);return p("string","string")}}function H(a,c){for(var e=!1,d;d=a.next();){if("/"==d&&e){c.tokenize=u;break}e="*"==d}return p("comment","comment")}function O(a,c){for(var e=!1,d;null!=(d=a.next());){if(!e&&("`"==d||"$"==d&&a.eat("{"))){c.tokenize=u;break}e=!e&&"\\"==d}return p("quasi","string-2",a.current())}function Q(a,c){c.fatArrowAt&&(c.fatArrowAt=null);
var e=a.string.indexOf("=>",a.start);if(!(0>e)){for(var d=0,b=!1,e=e-1;0<=e;--e){var f=a.string.charAt(e),g="([{}])".indexOf(f);if(0<=g&&3>g){if(!d){++e;break}if(0==--d)break}else if(3<=g&&6>g)++d;else if(P.test(f))b=!0;else if(b&&!d){++e;break}}b&&!d&&(c.fatArrowAt=e)}}function Z(a,c,b,d,f,g){this.indented=a;this.column=c;this.type=b;this.prev=f;this.info=g;null!=d&&(this.align=d)}function g(){for(var a=arguments.length-1;0<=a;a--)f.cc.push(arguments[a])}function b(){g.apply(null,arguments);return!0}
function v(a){function c(c){for(;c;c=c.next)if(c.name==a)return!0;return!1}var b=f.state;b.context?(f.marked="def",c(b.localVars)||(b.localVars={name:a,next:b.localVars})):!c(b.globalVars)&&r.globalVars&&(b.globalVars={name:a,next:b.globalVars})}function w(){f.state.context={prev:f.state.context,vars:f.state.localVars};f.state.localVars=na}function x(){f.state.localVars=f.state.context.vars;f.state.context=f.state.context.prev}function k(a,c){var b=function(){var b=f.state,e=b.indented;if("stat"==
b.lexical.type)e=b.lexical.indented;else for(var g=b.lexical;g&&")"==g.type&&g.align;g=g.prev)e=g.indented;b.lexical=new Z(e,f.stream.column(),a,null,b.lexical,c)};b.lex=!0;return b}function h(){var a=f.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function l(a){function c(e){return e==a?b():";"==a?g():b(c)}return c}function q(a,c){return"var"==a?b(k("vardef",c.length),R,l(";"),h):"keyword a"==a?b(k("form"),m,q,h):"keyword b"==a?b(k("form"),
q,h):"{"==a?b(k("}"),S,h):";"==a?b():"if"==a?("else"==f.state.lexical.info&&f.state.cc[f.state.cc.length-1]==h&&f.state.cc.pop()(),b(k("form"),m,q,h,$)):"function"==a?b(t):"for"==a?b(k("form"),aa,q,h):"variable"==a?b(k("stat"),oa):"switch"==a?b(k("form"),m,k("}","switch"),l("{"),S,h,h):"case"==a?b(m,l(":")):"default"==a?b(l(":")):"catch"==a?b(k("form"),w,l("("),T,l(")"),q,h,x):"module"==a?b(k("form"),w,pa,x,h):"class"==a?b(k("form"),qa,h):"export"==a?b(k("form"),ra,h):"import"==a?b(k("form"),sa,h):
g(k("stat"),m,l(";"),h)}function m(a){return ba(a,!1)}function s(a){return ba(a,!0)}function ba(a,c){if(f.state.fatArrowAt==f.stream.start){var e=c?ca:da;if("("==a)return b(w,k(")"),C(y,")"),h,l("=>"),e,x);if("variable"==a)return g(w,y,l("=>"),e,x)}e=c?U:J;return ta.hasOwnProperty(a)?b(e):"function"==a?b(t,e):"keyword c"==a?b(c?ua:V):"("==a?b(k(")"),V,K,l(")"),h,e):"operator"==a||"spread"==a?b(c?s:m):"["==a?b(k("]"),va,h,e):"{"==a?D(wa,"}",null,e):"quasi"==a?g(L,e):b()}function V(a){return a.match(/[;\}\)\],]/)?
g():g(m)}function ua(a){return a.match(/[;\}\)\],]/)?g():g(s)}function J(a,c){return","==a?b(m):U(a,c,!1)}function U(a,c,e){var d=0==e?J:U,f=0==e?m:s;if("=>"==c)return b(w,e?ca:da,x);if("operator"==a)return/\+\+|--/.test(c)?b(d):"?"==c?b(m,l(":"),f):b(f);if("quasi"==a)return g(L,d);if(";"!=a){if("("==a)return D(s,")","call",d);if("."==a)return b(xa,d);if("["==a)return b(k("]"),V,l("]"),h,d)}}function L(a,c){return"quasi"!=a?g():"${"!=c.slice(c.length-2)?b(L):b(m,ya)}function ya(a){if("}"==a)return f.marked=
"string-2",f.state.tokenize=O,b(L)}function da(a){Q(f.stream,f.state);return"{"==a?g(q):g(m)}function ca(a){Q(f.stream,f.state);return"{"==a?g(q):g(s)}function oa(a){return":"==a?b(h,q):g(J,l(";"),h)}function xa(a){if("variable"==a)return f.marked="property",b()}function wa(a,c){if("variable"==a||"keyword"==f.style)return f.marked="property","get"==c||"set"==c?b(za):b(E);if("number"==a||"string"==a)return f.marked=I?"property":f.style+" property",b(E);if("jsonld-keyword"==a)return b(E);if("["==a)return b(m,
l("]"),E)}function za(a){if("variable"!=a)return g(E);f.marked="property";return b(t)}function E(a){if(":"==a)return b(s);if("("==a)return g(t)}function C(a,c){function e(d){return","==d?(d=f.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),b(a,e)):d==c?b():b(l(c))}return function(d){return d==c?b():g(a,e)}}function D(a,c,e){for(var d=3;d<arguments.length;d++)f.cc.push(arguments[d]);return b(k(c,e),C(a,c),h)}function S(a){return"}"==a?b():g(q,S)}function ea(a){if(fa&&":"==a)return b(Aa)}function Aa(a){if("variable"==
a)return f.marked="variable-3",b()}function R(){return g(y,ea,W,Ba)}function y(a,c){if("variable"==a)return v(c),b();if("["==a)return D(y,"]");if("{"==a)return D(Ca,"}")}function Ca(a,c){if("variable"==a&&!f.stream.match(/^\s*:/,!1))return v(c),b(W);"variable"==a&&(f.marked="property");return b(l(":"),y,W)}function W(a,c){if("="==c)return b(s)}function Ba(a){if(","==a)return b(R)}function $(a,c){if("keyword b"==a&&"else"==c)return b(k("form","else"),q,h)}function aa(a){if("("==a)return b(k(")"),Da,
l(")"),h)}function Da(a){return"var"==a?b(R,l(";"),M):";"==a?b(M):"variable"==a?b(Ea):g(m,l(";"),M)}function Ea(a,c){return"in"==c||"of"==c?(f.marked="keyword",b(m)):b(J,M)}function M(a,c){return";"==a?b(ga):"in"==c||"of"==c?(f.marked="keyword",b(m)):g(m,l(";"),ga)}function ga(a){")"!=a&&b(m)}function t(a,c){if("*"==c)return f.marked="keyword",b(t);if("variable"==a)return v(c),b(t);if("("==a)return b(w,k(")"),C(T,")"),h,q,x)}function T(a){return"spread"==a?b(T):g(y,ea)}function qa(a,c){if("variable"==
a)return v(c),b(ha)}function ha(a,c){if("extends"==c)return b(m,ha);if("{"==a)return b(k("}"),F,h)}function F(a,c){if("variable"==a||"keyword"==f.style)return f.marked="property","get"==c||"set"==c?b(Fa,t,F):b(t,F);if("*"==c)return f.marked="keyword",b(F);if(";"==a)return b(F);if("}"==a)return b()}function Fa(a){if("variable"!=a)return g();f.marked="property";return b()}function pa(a,c){if("string"==a)return b(q);if("variable"==a)return v(c),b(X)}function ra(a,c){return"*"==c?(f.marked="keyword",
b(X,l(";"))):"default"==c?(f.marked="keyword",b(m,l(";"))):g(q)}function sa(a){return"string"==a?b():g(ia,X)}function ia(a,c){if("{"==a)return D(ia,"}");"variable"==a&&v(c);return b()}function X(a,c){if("from"==c)return f.marked="keyword",b(m)}function va(a){return"]"==a?b():g(s,Ga)}function Ga(a){return"for"==a?g(K,l("]")):","==a?b(C(s,"]")):g(C(s,"]"))}function K(a){if("for"==a)return b(aa,K);if("if"==a)return b(m,K)}var z=ka.indentUnit,ja=r.statementIndent,I=r.jsonld,A=r.json||I,fa=r.typescript,
P=r.wordCharacters||/[\w$]/,Y=function(){function a(a){return{type:a,style:"keyword"}}var c=a("keyword a"),b=a("keyword b"),d=a("keyword c"),f=a("operator"),g={type:"atom",style:"atom"},c={"if":a("if"),"while":c,"with":c,"else":b,"do":b,"try":b,"finally":b,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":f,
"typeof":f,"instanceof":f,"true":g,"false":g,"null":g,undefined:g,NaN:g,Infinity:g,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(fa){var b={type:"variable",style:"variable-3"},b={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),string:b,number:b,bool:b,any:b},h;for(h in b)c[h]=b[h]}return c}(),
N=/[+\-*&%=<>!?|~^]/,ma=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,B,G,ta={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},f={state:null,column:null,marked:null,cc:null},na={name:"this",next:{name:"arguments"}};h.lex=!0;return{startState:function(a){a={tokenize:u,lastType:"sof",cc:[],lexical:new Z((a||0)-z,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:0};r.globalVars&&"object"==typeof r.globalVars&&
(a.globalVars=r.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),Q(a,b));if(b.tokenize!=H&&a.eatSpace())return null;var e=b.tokenize(a,b);if("comment"==B)return e;b.lastType="operator"!=B||"++"!=G&&"--"!=G?B:"incdec";a:{var d=B,g=G,h=b.cc;f.state=b;f.stream=a;f.marked=null;f.cc=h;f.style=e;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((h.length?h.pop():A?m:q)(d,g)){for(;h.length&&h[h.length-1].lex;)h.pop()();
if(f.marked){e=f.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==g){d=!0;break b}for(h=b.context;h;h=h.prev)for(d=h.vars;d;d=d.next)if(d.name==g){d=!0;break b}d=void 0}if(d){e="variable-2";break a}break a}}return e},indent:function(a,b){if(a.tokenize==H)return n.Pass;if(a.tokenize!=u)return 0;var e=b&&b.charAt(0),d=a.lexical;if(!/^\s*else\b/.test(b))for(var f=a.cc.length-1;0<=f;--f){var g=a.cc[f];if(g==h)d=d.prev;else if(g!=$)break}"stat"==d.type&&"}"==e&&(d=d.prev);ja&&
")"==d.type&&"stat"==d.prev.type&&(d=d.prev);f=d.type;g=e==f;return"vardef"==f?d.indented+("operator"==a.lastType||","==a.lastType?d.info+1:0):"form"==f&&"{"==e?d.indented:"form"==f?d.indented+z:"stat"==f?d.indented+("operator"==a.lastType||","==a.lastType?ja||z:0):"switch"!=d.info||g||0==r.doubleIndentSwitch?d.align?d.column+(g?0:1):d.indented+(g?0:z):d.indented+(/^(?:case|default)\b/.test(b)?z:2*z)},electricChars:":{}",blockCommentStart:A?null:"/*",blockCommentEnd:A?null:"*/",lineComment:A?null:
"//",fold:"brace",helperType:A?"json":"javascript",jsonldMode:I,jsonMode:A}});n.registerHelper("wordChars","javascript",/[\w$]/);n.defineMIME("text/javascript","javascript");n.defineMIME("text/ecmascript","javascript");n.defineMIME("application/javascript","javascript");n.defineMIME("application/x-javascript","javascript");n.defineMIME("application/ecmascript","javascript");n.defineMIME("application/json",{name:"javascript",json:!0});n.defineMIME("application/x-json",{name:"javascript",json:!0});
n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});n.defineMIME("text/typescript",{name:"javascript",typescript:!0});n.defineMIME("application/typescript",{name:"javascript",typescript:!0})});